<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singlish - Reviews</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
        body{background:#000;color:#fff;min-height:100vh;display:flex;flex-direction:column;align-items:center;overflow-x:hidden;position:relative}
        .particle{position:absolute;background:rgba(0,255,255,0.2);border-radius:50%;pointer-events:none;animation:float 10s infinite ease-in-out;z-index:0}
        .particle:nth-child(1){width:15px;height:15px;top:10%;left:15%;animation-delay:0s}
        .particle:nth-child(2){width:20px;height:20px;top:30%;right:10%;animation-delay:2s}
        .particle:nth-child(3){width:10px;height:10px;bottom:20%;left:25%;animation-delay:4s}
        .particle:nth-child(4){width:25px;height:25px;bottom:15%;right:20%;animation-delay:6s}
        .particle:nth-child(5){width:18px;height:18px;top:50%;left:5%;animation-delay:8s}
        @keyframes float{0%,100%{transform:translateY(0) scale(1);opacity:0.2}50%{transform:translateY(-50px) scale(1.2);opacity:0.6}}
        header{position:absolute;top:30px;width:90%;display:flex;justify-content:space-between;align-items:center;z-index:10}
        .logo{font-size:28px;font-weight:700;color:#fff;transition:transform 0.3s ease}
        .logo:hover{transform:scale(1.1)}
        .logo::before{content:"â™¦ ";color:#00FFFF}
        nav a{color:#fff;text-decoration:none;margin:0 20px;font-size:16px;font-weight:500;transition:color 0.3s ease}
        nav a:hover, nav a.active{color:#00FFFF}
        .sign-up, .sign-out{background:linear-gradient(90deg,#00FFFF 0%,#00CED1 100%);border:none;padding:10px 25px;color:#fff;text-decoration:none;border-radius:25px;font-size:16px;font-weight:500;box-shadow:0 4px 15px rgba(0,255,255,0.3);transition:transform 0.3s ease,box-shadow 0.3s ease;cursor:pointer}
        .sign-up:hover, .sign-out:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,255,255,0.5)}
        .sign-up:disabled, .sign-out:disabled{opacity:0.6;cursor:not-allowed}
        .main-content{text-align:center;max-width:800px;padding:80px 20px;animation:fadeIn 1.5s ease-in-out;z-index:20}
        @keyframes fadeIn{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}
        h1{font-size:48px;margin-bottom:20px;font-weight:700;color:#fff}
        .review-form{display:flex;flex-direction:column;align-items:center;gap:20px;margin-top:30px}
        textarea{width:100%;max-width:600px;min-height:150px;padding:15px;font-size:16px;color:#fff;background:#1a1a1a;border:1px solid #00FFFF;border-radius:10px;resize:vertical}
        .submit-review{background:linear-gradient(90deg,#00FFFF 0%,#00CED1 100%);color:#fff;padding:12px 40px;border:none;border-radius:50px;font-size:16px;font-weight:500;cursor:pointer;box-shadow:0 4px 15px rgba(0,255,255,0.3);transition:transform 0.3s ease,box-shadow 0.3s ease}
        .submit-review:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,255,255,0.5)}
        .submit-review:disabled{opacity:0.6;cursor:not-allowed}
    </style>
</head>
<body>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <header>
        <div class="logo">Singlish</div>
        <nav>
            <a href="./index.html">Home</a>
            <a href="./courses.html">Courses</a>
            <a href="#">About Us</a>
            <a href="./reviews.html" class="active">Reviews</a>
            <a href="#">Contacts</a>
        </nav>
        <div id="authButtons">
            <button class="sign-up" id="signUpButton" onclick="signInWithGoogle()">Sign Up</button>
            <button class="sign-out" id="signOutButton" onclick="signOut()" style="display: none;">Sign Out</button>
        </div>
    </header>
    <div class="main-content">
        <h1>Share Your Experience</h1>
        <div class="review-form">
            <textarea placeholder="Write your review here..." required></textarea>
            <button class="submit-review" id="submitReviewButton">Submit Review</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAAaoH4unLDHNq8TlpZh7skZ3WdKa-gPzA",
            authDomain: "singlish-a97c0.firebaseapp.com",
            projectId: "singlish-a97c0",
            storageBucket: "singlish-a97c0.firebasestorage.app",
            messagingSenderId: "28888918608",
            appId: "1:28888918608:web:27785a06c684813b693f55",
            measurementId: "G-HSYY3YS05R"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.signInWithGoogle = async () => {
            const signUpButton = document.getElementById("signUpButton");
            signUpButton.disabled = true;
            try {
                console.log("Starting sign-in process...");
                const result = await signInWithPopup(auth, provider);
                const user = result.user;
                updateAuthButtons(true);
                console.log("Sign-in successful:", user.displayName);
            } catch (error) {
                console.error("Sign-in error:", error.code, error.message);
                if (error.code === "auth/cancelled-popup-request") {
                    alert("Sign-in was cancelled. Please try again.");
                } else if (error.code === "auth/popup-blocked") {
                    alert("Popup was blocked by your browser. Please allow popups for this site and try again.");
                } else {
                    alert(`Failed to sign in: ${error.message}`);
                }
            } finally {
                signUpButton.disabled = false;
                console.log("Sign-in process completed.");
            }
        };

        window.signOut = async () => {
            const signOutButton = document.getElementById("signOutButton");
            signOutButton.disabled = true;
            try {
                await signOut(auth);
                updateAuthButtons(false);
                console.log("Sign-out successful.");
            } catch (error) {
                console.error("Sign-out error:", error);
                alert(`Failed to sign out: ${error.message}`);
            } finally {
                signOutButton.disabled = false;
            }
        };

        function updateAuthButtons(isSignedIn) {
            document.getElementById("signUpButton").style.display = isSignedIn ? "none" : "inline-block";
            document.getElementById("signOutButton").style.display = isSignedIn ? "inline-block" : "none";
        }

        onAuthStateChanged(auth, (user) => {
            if (user) {
                updateAuthButtons(true);
                console.log("User is signed in:", user.displayName);
            } else {
                updateAuthButtons(false);
                console.log("No user is signed in.");
            }
        });
    </script>
</body>
</html>
